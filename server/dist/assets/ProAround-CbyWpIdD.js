import{r as s,D as z,c as y,o as c,g as t,A as p,b as n,w as m,e as l,n as M,Q as B,i as T,z as _,v as D,m as N,E as P,M as O,N as S,O as U,t as j,h as G,y as f}from"./index-B6-cChpL.js";import{o as H,s as R}from"./index-DbDPPphc.js";import{l as $}from"./loadGoogleMap-DZ-zVA3K.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-93e-Jyro.js";const F={style:{position:"relative","z-index":"1",opacity:"0.8","border-radius":"10px"}},J={style:{display:"flex","justify-content":"right"}},Q={class:"input-group"},W={class:"field-wrapper"},X={key:0},Y={key:1},K={class:"flex items-center gap-2"},Z={class:"distSelectPanel"},ee={style:{"margin-top":"15px"}},oe=Object.assign({name:"pro-around"},{__name:"ProAround",setup(te){const i=s(null),u=s(null),g=s(null),b=s(!1),h=H,w=s(""),x=s(!1),E=s(!1),k=s([{text:"1 km",value:1},{text:"10 km",value:10},{text:"20 km",value:20},{text:"30 km",value:30},{text:"40 km",value:40},{text:"50 km",value:50},{text:"60 km",value:60},{text:"70 km",value:70},{text:"80 km",value:80},{text:"90 km",value:90},{text:"100 km",value:100},{text:"200 km",value:200},{text:"300 km",value:300}]),L=async()=>{try{await $(),console.log("Map is inited in pro around! ✅"),A();const a=document.getElementById("client-input"),e={lat:50.064192,lng:-130.605469},v={bounds:{north:e.lat+.1,south:e.lat-.1,east:e.lng+.1,west:e.lng-.1},componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},d=new google.maps.places.Autocomplete(a,v);d.addListener("place_changed",()=>{let r=d.getPlace();u.value=r.geometry.location.lat(),g.value=r.geometry.location.lng(),console.log("Address xxxx "+r.formatted_address),console.log("place-----lat------"+u.value)});try{new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(u.value,g.value),mapTypeId:google.maps.MapTypeId.ROADMAP,accuracy:50})}catch(r){console.log("Error to load map: "+r.message)}}catch(a){console.error("Google Maps failed to load ❌",a),b.value=!0}},A=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{const{latitude:e,longitude:o}=a.coords;u.value=e,g.value=o,console.log("myLat "+e),C(e,o)})},C=(a,e)=>{try{console.log("Map is loading...");const o=document.getElementById("map");if(!o)throw new Error("Map container #map not found");if(!(o instanceof HTMLElement))throw new Error("Map container is not an HTMLElement");const v=new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(a,e),mapTypeId:google.maps.MapTypeId.ROADMAP,accuracy:50}),d=document.getElementById("spinner");google.maps.event.addListenerOnce(v,"tilesloaded",()=>{console.log("tiles loaded"),d.style.opacity="0",setTimeout(()=>d.style.display="none",400),E.value=!0})}catch(o){console.log("Error to load map: "+o.message)}I(a,e)},I=(a,e)=>{j.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+a+","+e+"&key=AIzaSyDt2YXE5tk0J72JgqnH3DTD7MeoqbbWBmU").then(o=>{o.data.error_message?console.log(o.data.error_message):(new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(a,e),mapTypeId:google.maps.MapTypeId.ROADMAP}),i.value=o.data.results[1].formatted_address)}).catch(o=>{console.log(o.message)})};z(async()=>{await L()});const V=()=>{x.value=!1,i.value=""};return(a,e)=>(c(),y(U,null,[t("div",null,[t("div",F,[t("div",{class:p([{hideMainPanel:!a.isMainPanel},"client-map-panel"])},[t("div",J,[n(l(M),{size:"lg",style:{padding:"10px"},onClick:a.closeMainPanel},{default:m(()=>[...e[6]||(e[6]=[t("i",{class:"fas fa-expand-arrows-alt"},null,-1)])]),_:1},8,["onClick"]),t("div",null,[n(l(B),{white:"",style:{padding:"10px"},size:"sm",onClick:e[0]||(e[0]=o=>a.$router.go(-1))})])]),t("div",{class:p([{hideClientInput:!i.value&&x.value},"field-wrapper"]),style:{width:"100%"}},[t("div",Q,[n(l(D),{size:"sm",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),label:"Anna osoite",id:"client-input",placeholder:"",wrapperClass:"form-outline flex-grow-3",inputClass:"ps-0","aria-describedby":"button-addon2"},null,8,["modelValue"]),i.value?(c(),T(l(N),{key:0,type:"button",style:{border:"1px solid #ddd"}},{default:m(()=>[n(l(M),{size:"1x",onClick:e[2]||(e[2]=o=>V())},{default:m(()=>[...e[7]||(e[7]=[t("i",{class:p("fas fa-times")},null,-1)])]),_:1})]),_:1})):_("",!0)])],2),t("div",W,[t("div",null,[n(l(R),{style:P([{width:"100%"},a.isNoPro?"color: pink; border: 1px solid red;":"color: white;"]),modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=o=>w.value=o),options:l(h),filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen *",class:"w-full md:w-[30rem]"},{value:m(o=>[o.value?(c(),y("div",X,[t("div",null,f(o.value.label),1)])):(c(),y("span",Y,f(o.placeholder),1))]),optiongroup:m(o=>[t("div",K,[t("i",{class:p(o.option.icon),style:{"font-size":"17px",color:"cadetblue"}},null,2),e[8]||(e[8]=G("    ",-1)),t("span",null,f(o.option.label),1)])]),_:1},8,["modelValue","options","style"])])]),t("div",{class:p({hideDistSelectPanel:!a.isDistSelection})},[e[9]||(e[9]=t("p",{style:{"text-align":"left"}},"Valitse kiinnostavaa ajankohta tai heti!",-1)),t("div",Z,[t("div",ee,[n(l(O),{label:"Heti!",name:"selection",modelValue:a.isSelectNotNow,"onUpdate:modelValue":e[4]||(e[4]=o=>a.isSelectNotNow=o),value:"true",onClick:a.removeDateIfExist,wrapperClass:"mb-4"},null,8,["modelValue","onClick"])])])],2),n(l(S),{size:"sm",white:"",options:k.value,"onUpdate:options":e[5]||(e[5]=o=>k.value=o),label:"Etsi alue"},null,8,["options"])],2)])]),e[10]||(e[10]=t("div",{id:"map-container"},[t("div",{id:"map"}),t("div",{id:"spinner",class:"spinner-overlay"},[t("div",{class:"spinner"})])],-1))],64))}}),de=q(oe,[["__scopeId","data-v-4ff30cb9"]]);export{de as default};
