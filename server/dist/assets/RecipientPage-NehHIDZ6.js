import{u as q,r as _,N as D,b2 as P,a2 as T,i as c,o as s,w as l,e,J as U,f as j,c as v,b as a,g as r,Z as C,G as f,y as d,R as G,aD as J,z as k,h as p,m as h,A as M,b3 as Z,I as A}from"./index-DVfyyoyg.js";import E from"./RecipientContent-iHnPEAdk.js";/* empty css                                                                      */import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                         */const L={key:0},H={key:1},K={class:"client-header"},W={key:0,class:"client-orders"},X={id:"info-block-confirmed"},Y={class:"file-marker"},ee={class:"box-title-confirmed"},te={class:"box-contents-confirmed"},le={class:"booking_time"},ne={key:0},se={style:{"margin-top":"23px"}},oe=Object.assign({name:"recipient-page"},{__name:"RecipientPage",props:{},setup(ae){const{t:i}=q(),w=j();_(null);const B=_(!1),x=_(null),y=D(),N=P(),g=_(!1),S=_(null),m=_(""),{bookings:R}=T(y),O=(n,o)=>{console.log("Booking id - "+n),console.log("Booking title: "),B.value=!0,x.value=y.getBookingById(n)},I=(n,o)=>{console.log("Booking id is "+n),console.log("Offer id is "+o),x.value=y.getBookingById(n)},V=()=>{B.value=!1},b=n=>{console.log("Index, quit booking: "+n),S.value=n,g.value=!0},z=()=>{g.value=!1,m.value=""},Q=async n=>{console.log("Quit bbb "+n.header),console.log("Selected booking pro user - "+n.ordered[0].user);const o=n.ordered[0].user;await y.removeConfirmedMapOffer(n),await N.addNotification(n,m.value,o)};return(n,o)=>(s(),c(e(U),null,{default:l(()=>[B.value?(s(),v("div",L,[a(E,{booking:x.value,onUpdateOfferState:I,onCanselRecipientContent:V},null,8,["booking"])])):(s(),v("div",H,[r("div",null,[a(e(C),null,{default:l(()=>[a(e(f),{md:"8"}),a(e(f),{style:{padding:"20px 5px 20px 5px",color:"cadetblue"},md:"4"},{default:l(()=>[r("h3",K,d(e(i)("recipient_panel_you_have")+" "+e(R).length+" "+e(i)("recipient_panel_open_orders")),1)]),_:1})]),_:1}),(s(!0),v(G,null,J(e(R),(t,$)=>(s(),c(e(C),{key:$,class:"bookings"},{default:l(()=>[t.status!=="confirmed"?(s(),v("div",W,[r("aside",X,[r("section",Y,[r("div",null,[r("div",ee,d(t.isIncludeOffers?t.offers.length>0?t.offers.length+" "+e(i)("offerCountNotification"):e(i)("recipient_panel_no_offers"):e(i)("recipient_panel_order_is_pending")),1),r("div",te,[a(e(C),null,{default:l(()=>[a(e(f),null,{default:l(()=>[r("p",le,d(t.date),1)]),_:2},1024),a(e(f),null,{default:l(()=>[p(d(t.header),1)]),_:2},1024),a(e(f),{lg:"4"},{default:l(()=>[t.isIncludeOffers?(s(),c(e(h),{key:1,rounded:"",outline:"",size:"lg",onClick:u=>O(t.id,t),style:{width:"100%"}},{default:l(()=>[r("span",{class:M({date_expired:t.created_ms-new Date().getTime()<=0})},d(e(i)("recipient_panel_order")),3),t.offers.filter(u=>u.isNewOffer).length>0?(s(),c(e(Z),{key:0,color:"danger",class:"ms-2"},{default:l(()=>[p(d(t.offers.filter(u=>u.isNewOffer).length),1)]),_:2},1024)):k("",!0)]),_:2},1032,["onClick"])):(s(),v("div",ne,[S.value===t.id&&g.value?(s(),c(e(h),{key:0,style:{"margin-bottom":"13px"},outline:"danger",block:"",size:"lg",onClick:z},{default:l(()=>[...o[2]||(o[2]=[p(" Poistu ",-1)])]),_:1})):(s(),c(e(h),{key:1,color:"danger",onClick:u=>b(t.id)},{default:l(()=>[p(d(e(i)("recipient_panel_quit_order")),1)]),_:1},8,["onClick"]))]))]),_:2},1024)]),_:2},1024),S.value===t.id&&!t.isIncludeOffers?(s(),c(e(C),{key:0},{default:l(()=>[a(e(f),{lg:"8",style:{"text-align":"center"}},{default:l(()=>[g.value?(s(),c(e(A),{key:0,white:"",style:{},modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=u=>m.value=u),label:e(i)("recipient_panel_give_reason"),rows:"3"},null,8,["modelValue","label"])):k("",!0)]),_:1}),a(e(f),{lg:"4"},{default:l(()=>[g.value&&m.value.length>3?(s(),c(e(h),{key:0,block:"",color:"success",size:"lg>",style:{"margin-top":"10px"},onClick:u=>Q(t)},{default:l(()=>[p(d(e(i)("recipient_panel_confirm_quit")),1)]),_:1},8,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)):k("",!0)])])])])])):k("",!0)]),_:2},1024))),128)),r("div",se,[a(e(h),{outline:"info",block:"",size:"lg",onClick:o[1]||(o[1]=t=>e(w).push("/client-form"))},{default:l(()=>[p(d(e(i)("recipient_panel_new_order")),1)]),_:1})])])]))]),_:1}))}}),fe=F(oe,[["__scopeId","data-v-cb8b9288"]]);export{fe as default};
