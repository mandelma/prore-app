import{r as m,D as _,Y as P,c as g,o as d,g as s,z as w,F as b,h as x,_ as M,y as B}from"./index-DVfyyoyg.js";import{L as C}from"./index-93e-Jyro.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"controls"},I={key:1,class:"error"},U=Object.assign({name:"follow-user-position"},{__name:"FollowUserPosition",setup(F){const y="AIzaSyDt2YXE5tk0J72JgqnH3DTD7MeoqbbWBmU",r=m(!0),a=m(null),i=m("");let e,l,n,u=!1;const h=c=>{const o=c.coords.latitude,p=c.coords.longitude,t=new google.maps.LatLng(o,p);if(!e){e=new google.maps.Map(document.getElementById("map"),{center:t,zoom:16,mapTypeControl:!1,streetViewControl:!1}),l=new google.maps.Marker({position:t,map:e,title:"You are here"}),n=new google.maps.Polyline({map:e,path:[t],strokeOpacity:.9,strokeWeight:3}),u=!0;return}l.setPosition(t),n.getPath().push(t),r.value&&(u?(e.setCenter(t),u=!1):e.panTo(t))},f=()=>{i.value=err.message||"Geolocation error",e||(e=new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:2}))},k=()=>{if(!("geolocation"in navigator)){f();return}a.value=navigator.geolocation.watchPosition(h,f,{enableHighAccuracy:!0,maximumAge:5e3,timeout:1e4})},v=()=>{a.value!==null&&(navigator.geolocation.clearWatch(a.value),a.value=null)};return _(async()=>{await new C({apiKey:y,version:"weekly"}).load(),k()}),P(()=>{v(),l&&l.setMap(null),n&&n.setMap(null),e=null,l=null,n=null}),(c,o)=>(d(),g("div",null,[s("div",E,[s("label",null,[b(s("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=p=>r.value=p)},null,512),[[M,r.value]]),o[1]||(o[1]=x(" Follow my location ",-1))]),a.value!==null?(d(),g("button",{key:0,onClick:v},"Stop")):w("",!0),i.value?(d(),g("span",I,B(i.value),1)):w("",!0)]),o[2]||(o[2]=s("div",{id:"map",class:"map"},null,-1))]))}}),A=D(U,[["__scopeId","data-v-77d781f3"]]);export{A as default};
