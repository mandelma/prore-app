import{N as B,c as u,o as s,g as t,b as o,e,Q as C,w as i,y as a,a_ as z,h as g,m as p,u as Q,r as v,a2 as P,i as _,J as T,q as V,z as x,Z as O,G as m,A as I,O as q,R as H,aD as U,b3 as j}from"./index-DVfyyoyg.js";/* empty css                                                                         */import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={style:{display:"flex","justify-content":"right",padding:"7px"}},F={class:"mb-3"},G={class:"right-side"},J=Object.assign({name:"offer-content"},{__name:"OfferContent",props:{offerId:{type:String}},emits:["quit-content"],setup(l,{emit:h}){const b=B(),f=h,D=()=>{f("quit-content",!1),console.log("Yees")},k=b.getOfferById(l.offerId),y=async()=>{console.log("Ordering the provider to the booking - "+k.bookingID),await b.confirmOffer(k),f("quit-content",!0)};return(w,c)=>(s(),u("div",null,[t("div",Y,[o(e(C),{white:"",onClick:D})]),o(e(z),{variant:"dark"},{default:i(()=>[t("tbody",null,[t("tr",null,[c[0]||(c[0]=t("td",null," Yritys ",-1)),t("td",null,a(e(k).name),1)]),t("tr",null,[c[1]||(c[1]=t("td",null,"Y-tunnus",-1)),t("td",null,a(e(k).provider.ide),1)]),t("tr",null,[c[2]||(c[2]=t("td",null," Osoite ",-1)),t("td",null,a(e(k).provider.address),1)])])]),_:1}),t("div",F,[o(e(p),{color:"primary",onClick:y,block:""},{default:i(()=>[...c[3]||(c[3]=[g("Tilaa",-1)])]),_:1})]),t("div",G,[o(e(p),{color:"dark"},{default:i(()=>[...c[4]||(c[4]=[t("i",{class:"far fa-comment"},null,-1)])]),_:1})])]))}}),L=M(J,[["__scopeId","data-v-ee26a002"]]),Z={style:{display:"flex","justify-content":"right",padding:"20px"}},A={key:0,class:"spinner-border",role:"status"},K={key:1,class:"booking-content"},W={class:"client-result-header"},X={key:0,class:"expired_date"},ee={key:0},te={key:1},ne={style:{display:"flex","justify-content":"right",cursor:"pointer"}},oe={key:0},ie={key:0},le={key:1},se={key:0},ae={key:1},de={key:0,class:"offer-list"},re={class:"w-100 position-relative"},ue={style:{"font-size":"12px"}},ce={style:{"font-size":"11px"}},fe={style:{"font-size":"11px"}},ge={key:1},ke={style:{width:"100%","margin-top":"12px"}},pe=Object.assign({name:"recipient-content"},{__name:"RecipientContent",props:{booking:{type:Object},bIndex:{type:Number}},emits:["canselRecipientContent","updateOfferState"],setup(l,{emit:h}){const b=h,{t:f}=Q(),D=B();v([]);const k=v(""),y=v(!1),w=v([{text:"Distance",value:25}]),c=v(!1),{bookings:me}=P(D),N=async(d,n)=>{console.log("Provider info"+d),console.log("booking id - "+n.bookingID),y.value=!0,k.value=n.id,await D.readOffer(n),b("updateOfferState",n.bookingID,n.id)},E=d=>{console.log("Quitting content!"),y.value=!1,d&&S()},S=()=>{b("canselRecipientContent")};return(d,n)=>{const R=V("MDBTextarea"),$=V("VueDatePicker");return y.value?(s(),_(e(T),{key:0},{default:i(()=>[t("div",null,[o(L,{offerId:k.value,onQuitContent:E},null,8,["offerId"])])]),_:1})):(s(),_(e(T),{key:1},{default:i(()=>[t("div",Z,[o(e(C),{white:"",style:{cursor:"pointer"},onClick:S})]),l.booking?(s(),u("div",K,[t("h2",W,a(e(f)("recipient_result_need_a_pro"))+" - "+a(l.booking.professional[0]),1),l.booking.created_ms-new Date().getTime()<=0&&l.booking.offers.length<1?(s(),u("h5",X,a(e(f)("recipient_result_order_is_expired")),1)):x("",!0),o(e(O),{style:{"margin-top":"50px"}},{default:i(()=>[o(e(m),{class:"client-result"},{default:i(()=>[o(e(z),{borderless:"",style:{"font-size":"14px",color:"#dddddd","text-align":"left"}},{default:i(()=>[t("tbody",null,[t("tr",null,[d.isEditDescription?(s(),u("td",te,[o(e(O),null,{default:i(()=>[o(e(m),null,{default:i(()=>[o(R,{label:e(f)("recipient_result_edit_description"),white:"",rows:"4",modelValue:d.description,"onUpdate:modelValue":n[0]||(n[0]=r=>d.description=r),style:{"font-size":"14px",padding:"20px"}},null,8,["label","modelValue"])]),_:1}),o(e(m),{col:"1"},{default:i(()=>[t("div",ne,[o(e(C),{white:"",onClick:n[1]||(n[1]=r=>d.isEditDescription=!1)})])]),_:1})]),_:1})])):(s(),u("td",ee,[t("p",null,a(l.booking.description),1)]))]),l.booking.offers.length<1?(s(),u("tr",oe,[d.isEditDescription?(s(),u("td",le,[o(e(p),{outline:"info",block:"",size:"lg",onClick:d.saveEditedDescription},{default:i(()=>[...n[7]||(n[7]=[g("Tallenna tehtävän kuvaus",-1)])]),_:1},8,["onClick"])])):(s(),u("td",ie,[o(e(p),{outline:"info",block:"",size:"lg",onClick:d.pressedEditDescription},{default:i(()=>[...n[6]||(n[6]=[g("Muokkaa tehtävän kuvausta",-1)])]),_:1},8,["onClick"])]))])):x("",!0),t("tr",null,[c.value?(s(),u("td",ae,[o(e(O),null,{default:i(()=>[o(e(m),{col:"8"},{default:i(()=>[t("h4",{class:I({expired_date:l.booking.created_ms-new Date().getTime()<=0})},[g(a(d.bookingDateToDisplay),1),n[8]||(n[8]=t("br",null,null,-1)),g(" klo   "+a(new Date(l.booking.created).getHours()<10?"0"+new Date(l.booking.created).getHours():new Date(l.booking.created).getHours())+" : "+a(new Date(l.booking.created).getMinutes()<10?"0"+new Date(l.booking.created).getMinutes():new Date(l.booking.created).getMinutes()),1)],2),o($,{style:{"margin-bottom":"20px"},dark:"",modelValue:d.bookingDate,"onUpdate:modelValue":n[2]||(n[2]=r=>d.bookingDate=r),"min-date":new Date,placeholder:e(f)("recipient_result_select_date"),onInternalModelChange:d.handleInternalDate,state:d.isNoDate?!1:null},null,8,["modelValue","min-date","placeholder","onInternalModelChange","state"])]),_:1}),o(e(m),{col:"4"},{default:i(()=>[o(e(C),{white:"",onClick:n[3]||(n[3]=r=>c.value=!1),style:{float:"right",cursor:"pointer"}})]),_:1})]),_:1})])):(s(),u("td",se,[t("p",{class:I({expired_date:l.booking.created_ms-new Date().getTime()<=0&&l.booking.offers.length<1})},a(l.booking.date)+"   ",3),l.booking.offers.length<1?(s(),_(e(p),{key:0,block:"",size:"lg",outline:"info",onClick:d.editDate},{default:i(()=>[t("span",{class:I({expired_warning:l.booking.created_ms-new Date().getTime()<=0})},a(e(f)("recipient_result_edit_date")),3)]),_:1},8,["onClick"])):x("",!0)]))])])]),_:1})]),_:1}),o(e(m),{lg:"6"},{default:i(()=>[l.booking.offers.length>0?(s(),u("div",de,[n[12]||(n[12]=t("h3",{style:{padding:"13px"}},"Tehtyjä tarjouksia",-1)),o(e(q),{theme:"dark",size:"lg",style:{"margin-bottom":"17px"},white:"",options:w.value,"onUpdate:options":n[4]||(n[4]=r=>w.value=r),label:"Filter"},null,8,["options"]),o(e(z),{style:{width:"100%","font-size":"12px","text-align":"center"}},{default:i(()=>[t("tbody",null,[(s(!0),u(H,null,U(l.booking.offers,r=>(s(),u("tr",{key:r.id},[t("td",null,[t("div",re,[o(e(p),{class:"provider-selection",color:"primary",block:"",size:"lg",onClick:be=>N(r.provider,r)},{default:i(()=>[g(a(r.name)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),t("span",ue,a(e(f)("recipient_result_distance"))+" "+a(r.distance),1),n[10]||(n[10]=t("br",null,null,-1))]),_:2},1032,["onClick"]),r.isNewOffer?(s(),_(e(j),{key:0,color:"danger",class:"translate-middle p-2",pill:"",notification:""},{default:i(()=>[t("span",ce,[g(a(e(f)("recipient_result_new"))+" ",1),n[11]||(n[11]=t("br",null,null,-1)),g(a(r.price)+" eur ",1)])]),_:2},1024)):(s(),_(e(j),{key:1,color:"info",class:"position-absolute top-0 start-100 translate-middle",pill:"",notification:""},{default:i(()=>[t("span",fe,a(r.price)+" eur ",1)]),_:2},1024))])])]))),128))])]),_:1})])):(s(),u("div",ge,[t("h2",ke,a(e(f)("recipient_result_waiting_offers")),1)])),o(e(p),{style:{float:"right","margin-top":"27px"},color:"danger",size:"lg",onClick:d.removeOfferedBookings},{default:i(()=>[g(a(e(f)("recipient_result_remove_order")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})])):(s(),u("div",A,[...n[5]||(n[5]=[t("span",{class:"visually-hidden"},"Loading...",-1)])]))]),_:1}))}}}),De=M(pe,[["__scopeId","data-v-5867fd17"]]);export{De as default};
