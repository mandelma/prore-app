import{r as d,k as c,c as w,o as C,g as n,b as l,w as s,e as t,l as x,v as g,Z as E,m as U,h as m,p as j,f as L,q as S,G as f,M as F,s as M}from"./index-DVfyyoyg.js";const N={style:{padding:"13px 0 20px 0"}},z={class:"text-center"},A={style:{color:"#22D3EE"}},P=Object.assign({name:"LoginForm"},{__name:"LoginForm",setup(B){const a=d(""),r=d(""),p=d(!0),v=c();L();const u=d(!1),b=()=>{u.value=!1};d(!1);const y=async()=>{let i;const e={username:a.value,password:r.value};console.log("Filled username: "+a.value),a.value!==""&&r.value!==""?(i=await M.login(e),i.error!=="login error"?(console.log("User just logged in!"),v.onLogin(i)):(console.log("No user logged in"),u.value=!0)):(console.log("Error - Kaikki kentät täytettävä!"),u.value=!0),V()},V=()=>{a.value="",r.value=""};return(i,e)=>{const k=S("router-link");return C(),w("div",null,[n("div",N,[l(t(x),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),autohide:"",delay:3e3,stacking:!1,position:"top-center",toast:"danger",icon:"fas fa-exclamation-circle fa-lg me-2"},{title:s(()=>[...e[5]||(e[5]=[m(" TAPAHTUI VIRHE! ",-1)])]),small:s(()=>[...e[6]||(e[6]=[])]),default:s(()=>[n("button",{type:"button",style:{visibility:"hidden"},class:"btn-close ms-auto","aria-label":"Close",onClick:b}),e[7]||(e[7]=m(" Väärä käyttäjätunnus tai salasana! ",-1))]),_:1},8,["modelValue"])]),n("form",{class:"form-card",onSubmit:j(y,["prevent"]),autocomplete:"off"},[l(t(g),{type:"text",size:"lg",label:"Käyttäjätunnus",id:"loginUsername",modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value=o),wrapperClass:"mb-4"},null,8,["modelValue"]),l(t(g),{type:"password",size:"lg",label:"Salasana",id:"loginPassword",modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),wrapperClass:"mb-4"},null,8,["modelValue"]),l(t(E),{class:"mb-4"},{default:s(()=>[l(t(f),{class:"d-flex justify-content-center"},{default:s(()=>[l(t(F),{label:"Muista minut",id:"loginCheck",modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),wrapperClass:"mb-3 mb-md-0"},null,8,["modelValue"])]),_:1}),l(t(f),null,{default:s(()=>[l(k,{to:"/forgot_auth"},{default:s(()=>[...e[8]||(e[8]=[m("Forgot password",-1)])]),_:1})]),_:1})]),_:1}),l(t(U),{color:"primary",size:"lg",type:"submit",block:"",class:"mb-4"},{default:s(()=>[...e[9]||(e[9]=[m(" Kirjaudu ",-1)])]),_:1}),n("div",z,[n("p",A,[e[10]||(e[10]=m("Ei jäsen? ",-1)),n("span",{id:"reg",onClick:e[4]||(e[4]=o=>i.$router.push("/register-panel")),style:{cursor:"pointer",color:"#0E7490"}},"rekisteröidy")])])],32)])}}});export{P as default};
