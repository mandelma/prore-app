import{s as R,r as l,k as T,x as N,i as I,o as V,w as v,b as s,J as H,f as n,a as t,l as J,h as x,t as C,m as K,c as P,y as S,v as f,g as U,z as h,M as O,q as Z}from"./index-D319_UYR.js";const q="/api/users",D=async E=>(await R.post(`${q}`,E)).data,G={addUser:D},Q={style:{padding:"13px 0 20px 0"}},W={class:"input-group mb-3"},X={key:0,style:{color:"palevioletred"}},Y={class:"input-group mb-3"},ee={key:1,style:{color:"palevioletred"}},ae={class:"form-actions"},se=Object.assign({name:"register-form"},{__name:"RegisterForm",setup(E){const u=l(""),g=l(""),i=l(""),d=l(""),o=l(""),p=l(""),j=l(!0),b=l(!1),y=l(!1),r=l(!1),w=l(""),k=l("");l(""),l(""),l(""),l("");const m=l(""),z=T(),L=()=>{r.value=!1},A=()=>{console.log("Password is toggled"),b.value=!b.value},_=()=>{console.log("Password confirm is toggled!"),y.value=!y.value},F=()=>{/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-+=\[\]{};':"\\|,.<>/?]).{8,}$/.test(o.value)?w.value="":w.value="Salasanan on oltava vähintään 8 merkkiä pitkä ja sen on sisällettävä iso kirjain, numero ja erikoismerkki."},$=()=>{/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-+=\[\]{};':"\\|,.<>/?]).{8,}$/.test(p.value)?k.value="":k.value="Salasanan on oltava vähintään 8 merkkiä pitkä ja sen on sisällettävä iso kirjain, numero ja erikoismerkki."};N(o,c=>{F()}),N(p,c=>{$()});const M=async()=>{const c={firstName:u.value,lastName:g.value,username:i.value,email:d.value,password:o.value};if(u.value!==""&&g.value!==""&&i.value!==""&&o.value!==""&&d.value!=="")if(i.value.length<4)r.value=!0,m.value="Username must be longer than 4 characters!";else if(!/^[^@]+@\w+(\.\w+)+\w$/.test(d.value))r.value=!0,m.value="Anna kelvollinen sähköpostiosoite!";else if(o.value!==p.value)r.value=!0,m.value="Salasana on oltava sama!";else{console.log("Uus kasutaja");const e=await G.addUser(c);if(e.error==="username existing")r.value=!0,m.value="Käyttäjätunnus on jo olemassa! Vaihda käyttäjätunnus";else if(e.error==="email existing")r.value=!0,m.value="Antamasi sähköpostiosoite on jo olemassa!";else{console.log("registerFirstName "+u.value),console.log("registerLastName "+g.value),console.log("registerUsername "+i.value),console.log("registerPassword "+o.value),console.log("registerEmail "+d.value);const a=await Z.login({username:i.value,password:o.value});console.log("LOgin error: "+a.error),a.error!=="login error"?(z.onLogin(a),B()):console.log("Error with login! "+a.error)}}else r.value=!0,m.value="Kaikki kentät ovat täytettävä!!"},B=()=>{console.log("registerFirstName "+u.value),console.log("registerLastName "+g.value),console.log("registerUsername "+i.value),console.log("registerPassword "+o.value),console.log("registerEmail "+d.value)};return(c,e)=>(V(),I(s(H),null,{default:v(()=>[n("div",Q,[t(s(J),{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),autohide:"",delay:3e3,stacking:!1,position:"top-center",toast:"danger",icon:"fas fa-exclamation-circle fa-lg me-2"},{title:v(()=>e[8]||(e[8]=[x(" TAPAHTUI VIRHE! ",-1)])),small:v(()=>e[9]||(e[9]=[])),default:v(()=>[n("button",{type:"button",style:{visibility:"hidden"},class:"btn-close ms-auto","aria-label":"Close",onClick:L}),x(" "+C(m.value),1)]),_:1},8,["modelValue"])]),n("form",{class:"form-card",onSubmit:K(M,["prevent"]),autocomplete:"off"},[t(s(f),{type:"text",size:"lg",label:"Etunimi",id:"registerFirstName",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),wrapperClass:"mb-4"},null,8,["modelValue"]),t(s(f),{type:"text",size:"lg",label:"Sukunimi",id:"registerLastName",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),wrapperClass:"mb-4"},null,8,["modelValue"]),t(s(f),{type:"text",size:"lg",label:"käyttäjätunnus",id:"registerUsername",modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),wrapperClass:"mb-4"},null,8,["modelValue"]),t(s(f),{type:"text",size:"lg",label:"Email",id:"registerEmail",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value=a),wrapperClass:"mb-4"},null,8,["modelValue"]),n("div",W,[t(s(f),{size:"lg",modelValue:o.value,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value=a),type:b.value?"text":"password",label:"Anna salasana",wrapperClass:"form-outline flex-grow-3",inputClass:"ps-0","aria-describedby":"button-addon2"},null,8,["modelValue","type"]),t(s(U),{style:{border:"1px white"},type:"button"},{default:v(()=>[n("i",{class:h(b.value?"far fa-eye-slash":"far fa-eye"),style:{color:"#dddddd"},onClick:A},null,2)]),_:1})]),w.value&&o.value?(V(),P("p",X,C(w.value),1)):S("",!0),n("div",Y,[t(s(f),{size:"lg",modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=a=>p.value=a),type:y.value?"text":"password",label:"Toista salasana",wrapperClass:"form-outline flex-grow-3",inputClass:"ps-0","aria-describedby":"button-addon2"},null,8,["modelValue","type"]),t(s(U),{style:{border:"1px white"},type:"button"},{default:v(()=>[n("i",{class:h(y.value?"far fa-eye-slash":"far fa-eye"),style:{color:"#dddddd"},onClick:_},null,2)]),_:1})]),k.value&&p.value?(V(),P("p",ee,C(k.value),1)):S("",!0),t(s(O),{label:"Muista minut",size:"lg",id:"registerSubscribeCheck",modelValue:j.value,"onUpdate:modelValue":e[7]||(e[7]=a=>j.value=a),wrapperClass:"d-flex justify-content-center mb-4"},null,8,["modelValue"]),n("div",ae,[t(s(U),{color:"primary",size:"lg",type:"submit",block:"",class:"mb-4",disabled:!!w.value},{default:v(()=>e[10]||(e[10]=[x(" Luo tili ",-1)])),_:1,__:[10]},8,["disabled"])])],32)]),_:1}))}});export{se as default};
