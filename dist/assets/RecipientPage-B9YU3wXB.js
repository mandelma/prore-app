import{_ as A,u as K,r as f,N as M,aZ as Z,O as V,i as c,o,w as s,e,J as j,f as D,b as a,c as y,l as G,g as i,h as p,y as u,Z as B,G as _,S as H,aE as J,z as C,m as h,A as L,b3 as F,I as W}from"./index-G9ZV8JxE.js";import X from"./RecipientContent-DBi_Ys6k.js";/* empty css                                                                      *//* empty css                                                                         */const Y={key:0},ee={key:1},te={class:"client-header"},le={key:0,class:"client-orders"},se={id:"info-block-confirmed"},ne={class:"file-marker"},oe={class:"box-title-confirmed"},ae={class:"box-contents-confirmed"},ie={class:"booking_time"},re={key:0},de={style:{"margin-top":"23px"}},ue=Object.assign({name:"recipient-page"},{__name:"RecipientPage",props:{},setup(ce){const{t:r}=K(),T=D();f(null);const m=f(!1),S=f(null),k=M(),I=Z(),x=f(!1),w=f("TEST"),v=f(!1),O=f(null),g=f(""),{bookings:N}=V(k),{userId:fe}=V(I),$=(l,n)=>{console.log("Booking id - "+l),console.log("Booking title: "),m.value=!0,S.value=k.getBookingById(l)},E=(l,n)=>{console.log("Booking id is "+l),console.log("Offer id is "+n),S.value=k.getBookingById(l)},z=()=>{console.log("CANCEL"),m.value=!1},b=()=>{console.log("OUT"),m.value=!1},Q=l=>{m.value=!1,x.value=!0,w.value=`${l} vahvistettu`},U=l=>{console.log("Index, quit booking: "+l),O.value=l,v.value=!0},P=()=>{v.value=!1,g.value=""},q=async l=>{console.log("Quit bbb "+l.header),console.log("Selected booking pro user - "+l.ordered[0].user.id);const n=l.ordered[0].user.id,t=g.value,R=l.user.username;await k.removeConfirmedMapOffer(l);const d=`${l.user.username} peruutti tilauksen "${l.header}". Syyksi ilmoitettu: ${t}!`;await I.addNotification(l.id,R,d,n)};return(l,n)=>(o(),c(e(j),null,{default:s(()=>[a(e(G),{stacking:!1,autohide:"",delay:3e3,modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=t=>x.value=t),toast:"success",icon:"fas fa-check fa-lg me-2"},{title:s(()=>[...n[4]||(n[4]=[p(" PROKEIKKATORI ",-1)])]),default:s(()=>[i("button",{type:"button",style:{visibility:"hidden"},class:"btn-close ms-auto","aria-label":"Close",onClick:n[0]||(n[0]=(...t)=>l.hideError&&l.hideError(...t))}),p(" "+u(w.value),1)]),_:1},8,["modelValue"]),m.value?(o(),y("div",Y,[a(X,{booking:S.value,onUpdateOfferState:E,onCancelRecipientContent:z,onOutHere:b,onCanselRecipientContentConfirmed:Q},null,8,["booking"])])):(o(),y("div",ee,[i("div",null,[a(e(B),null,{default:s(()=>[a(e(_),{md:"8"}),a(e(_),{style:{padding:"20px 5px 20px 5px",color:"cadetblue"},md:"4"},{default:s(()=>[i("h3",te,u(e(r)("recipient_panel_you_have")+" "+e(N).length+" "+e(r)("recipient_panel_open_orders")),1)]),_:1})]),_:1}),(o(!0),y(H,null,J(e(N),(t,R)=>(o(),c(e(B),{key:R,class:"bookings"},{default:s(()=>[t.status!=="confirmed"?(o(),y("div",le,[i("aside",se,[i("section",ne,[i("div",null,[i("div",oe,u(t.isIncludeOffers?t.offers.length>0?t.offers.length+" "+e(r)("offerCountNotification"):e(r)("recipient_panel_no_offers"):e(r)("recipient_panel_order_is_pending")),1),i("div",ae,[a(e(B),null,{default:s(()=>[a(e(_),null,{default:s(()=>[i("p",ie,u(t.date),1)]),_:2},1024),a(e(_),null,{default:s(()=>[p(u(t.header),1)]),_:2},1024),a(e(_),{lg:"4"},{default:s(()=>[t.isIncludeOffers?(o(),c(e(h),{key:1,rounded:"",color:"primary",size:"lg",onClick:d=>$(t.id,t),style:{width:"100%"}},{default:s(()=>[i("span",{class:L({date_expired:t.created_ms-new Date().getTime()<=0})},u(e(r)("recipient_panel_order")),3),t.offers.filter(d=>d.isNewOffer).length>0?(o(),c(e(F),{key:0,color:"danger",class:"ms-2"},{default:s(()=>[p(u(t.offers.filter(d=>d.isNewOffer).length),1)]),_:2},1024)):C("",!0)]),_:2},1032,["onClick"])):(o(),y("div",re,[O.value===t.id&&v.value?(o(),c(e(h),{key:0,style:{"margin-bottom":"13px"},outline:"danger",block:"",size:"lg",onClick:P},{default:s(()=>[...n[5]||(n[5]=[p(" Poistu ",-1)])]),_:1})):(o(),c(e(h),{key:1,color:"danger",rounded:"",onClick:d=>U(t.id)},{default:s(()=>[p(u(e(r)("recipient_panel_quit_order")),1)]),_:1},8,["onClick"]))]))]),_:2},1024)]),_:2},1024),O.value===t.id&&!t.isIncludeOffers?(o(),c(e(B),{key:0},{default:s(()=>[a(e(_),{lg:"8",style:{"text-align":"center"}},{default:s(()=>[v.value?(o(),c(e(W),{key:0,white:"",style:{},modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=d=>g.value=d),label:e(r)("recipient_panel_give_reason"),rows:"3"},null,8,["modelValue","label"])):C("",!0)]),_:1}),a(e(_),{lg:"4"},{default:s(()=>[v.value&&g.value.length>3?(o(),c(e(h),{key:0,block:"",color:"success",size:"lg>",style:{"margin-top":"10px"},onClick:d=>q(t)},{default:s(()=>[p(u(e(r)("recipient_panel_confirm_quit")),1)]),_:1},8,["onClick"])):C("",!0)]),_:2},1024)]),_:2},1024)):C("",!0)])])])])])):C("",!0)]),_:2},1024))),128)),i("div",de,[a(e(h),{outline:"info",block:"",size:"lg",onClick:n[3]||(n[3]=t=>e(T).push("/client-form"))},{default:s(()=>[p(u(e(r)("recipient_panel_new_order")),1)]),_:1})])])]))]),_:1}))}}),ge=A(ue,[["__scopeId","data-v-cd26e836"]]);export{ge as default};
